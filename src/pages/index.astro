---
import background from '../assets/background.svg';
import BasicLayout from '@/layouts/BasicLayout.astro';
import { getCollection } from "astro:content";
import BentoItem from '@components/BentoItem.astro';
const allPosts = await getCollection("posts");

// Sort posts by date in descending order (newest first)
const sortedPosts = allPosts.sort(
  (a, b) => new Date(b.data.publishedDate).getTime() - new Date(a.data.publishedDate).getTime()
);
---

<BasicLayout>
<img id="background" src={background.src} alt="" fetchpriority="high" />
  <main class="px-8 md:px-12 mx-auto max-w-7xl py-12 lg:px-32">
    <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {sortedPosts.map((post) => (
        <BentoItem 
          title={post.data.title} 
          description={post.data.description} 
          coverImage={post.data.coverImage} 
          tags={post.data.tags} 
		  author={post.data.author} 
          authorImage={post.data.authorImage} 
		  url={"/posts/" + post.slug}
        />
      ))}
    </section>
  </main>
</BasicLayout>

<style>
	#background {
		position: fixed;
		top: 0;
		left: 0;
		width: 200%;
		height: 110%;
		z-index: -1;
		filter: blur(80px);
	}

	#container {
		font-family: Inter, Roboto, 'Helvetica Neue', 'Arial Nova', 'Nimbus Sans', Arial, sans-serif;
		height: 100%;
	}

	main {
		height: 100%;
		display: flex;
		justify-content: center;
	}
	</style>